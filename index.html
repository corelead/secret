<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>єДокумент</title>
  <link rel="stylesheet" href="styles.css">

  <link rel="manifest" href="manifest.json">

  <meta name="theme-color" content="#A7C7E7">

  <!-- iOS fullscreen mode -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Дія">

  <!-- iOS icons -->
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-512.png">
  <link rel="apple-touch-icon" href="icons/icon-1024.png">


</head>
<body>

  <div class="gradient-top"></div>

<div class="safe-area-top"></div>


  <div class="screen">

    <div class="cards-slider">

    <!-- CARD -->
        <div class="card">
          <h1 class="card-title">єДокумент</h1>

          <div class="top-row">
            <img src="img/photo.jpg" alt="photo" class="avatar">

            <div class="info">
              <p><strong>Дата народження:</strong><br>15.03.2009</p>
              <p><strong>РНОКПП:</strong><br>3988611099</p>
            </div>
          </div>

          <div class="status">
            <div class="scroll-wrapper">
                <span class="status-text">
                    Документ діє під час воєнного стану. Ой у лузі червона калина похилилася,
                    чогось наша славна Україна зажурилася.
                    А ми тую червону калину підіймемо,
                    а ми нашу славну Україну, гей, гей, розвеселимо!
                </span>
                <span class="status-text">
                    Документ діє під час воєнного стану. Ой у лузі червона калина похилилася,
                    чогось наша славна Україна зажурилася.
                    А ми тую червону калину підіймемо,
                    а ми нашу славну Україну, гей, гей, розвеселимо!
                </span>
            </div>
          </div>

          <div class="name-block">
            Приходько<br>
            Денис<br>
            Валерійович
          </div>

          <button class="menu-btn">•••</button>
        </div>

        <div class="card">
            <h1 class="card-title">Картка платника податків</h1>
        
            <div class="top-row">
              <div class="info">
                <p><strong>РНОКПП</strong>
                  <div class="name-block">
                    Приходько<br>Денис<br>Валерійович
                  </div>
                <p><strong>Дата видачі:</strong> 15.03.2023</p>
              </div>
            </div>
        
        
            <button class="menu-btn">•••</button>
        </div>

        <div class="card">
            <h1 class="card-title">Паспорт громадянина України</h1>
        
            <div class="top-row">
              <img src="img/photo.jpg" class="avatar">
              <div class="info">
                <p><strong>Серія/номер:</strong> ХХ123456</p>
                <p><strong>Дата видачі:</strong> 02.07.2020</p>
              </div>
            </div>

            <div class="name-block">
                Приходько<br>Денис<br>Валерійович
            </div>
          
              <button class="menu-btn">•••</button>
        </div>

        <div class="card">
            <h1 class="card-title">Закордонний<br>паспорт</h1>
        
            <div class="top-row">
              <img src="img/photo.jpg" class="avatar">
              <div class="info">
                <p><strong>Номер:</strong> СА123456</p>
                <p><strong>Дата видачі:</strong> 15.03.2023</p>
              </div>
            </div>
        
            <div class="name-block">
              Приходько<br>Денис<br>Валерійович
            </div>
        
            <button class="menu-btn">•••</button>
        </div>
        
      <div class="card actions-card">
        <div class="action-btn add-doc">
          <img src="img/plus.svg" class="action-icon">
          <p>Додати документ</p>
        </div>

        <div class="action-btn reorder-docs">
          <img src="img/arrows.svg" class="action-icon">
          <p>Змінити порядок<br>документів</p>
        </div>
      </div>
        

    </div>

    <!-- dots -->
    <div class="dots">
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
</div>

    <!-- bottom bar -->
    <nav class="bottom-nav">
      <div class="item">
        <img src="img/home.svg">
        <span>Стрічка</span>
      </div>
      <div class="item">
        <img src="img/docs.svg">
        <span>Документи</span>
      </div>
      <div class="item">
        <img src="img/services.svg">
        <span>Сервіси</span>
      </div>
      <div class="item">
        <img src="img/menu.svg">
        <span>Меню</span>
      </div>
    </nav>

  </div>

  <script>
    const slider = document.querySelector('.cards-slider');
    const cards = document.querySelectorAll('.card');
    const dots = document.querySelectorAll('.dots span');
    
    let isScrolling = false;
    
    function animate() {
      const sliderRect = slider.getBoundingClientRect();
      const sliderCenter = sliderRect.left + sliderRect.width / 2;
    
      let bestIndex = 0;
      let bestDistance = Infinity;
    
      cards.forEach((card, index) => {
        const rect = card.getBoundingClientRect();
        const cardCenter = rect.left + rect.width / 2;
    
        const distance = Math.abs(sliderCenter - cardCenter);
    
        // сохраняем ближайшую карточку
        if (distance < bestDistance) {
          bestDistance = distance;
          bestIndex = index;
        }
    
        // плавная анимация карточек
        let t = distance / (rect.width * 1.2);
        if (t > 1) t = 1;
    
        const scale = 1 - (1 - 0.92) * t;
        const translateY = 6 * t;
        const opacity = 1 - (1 - 0.7) * t;
    
        card.style.transform = `translateZ(0) scale(${scale}) translateY(${translateY}px)`;
        card.style.opacity = opacity;
      });
    
      if (isScrolling) requestAnimationFrame(animate);
    }
    
    // запускаем анимацию при скролле
    slider.addEventListener("scroll", () => {
      isScrolling = true;
      requestAnimationFrame(animate);
    });
    
    slider.addEventListener("scrollend", () => {
      isScrolling = false;
    });
    
    // старт
    window.addEventListener("load", () => {
      requestAnimationFrame(animate);
    });
    </script>    

    <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js");
  }
</script>

<script>
const dots2 = document.querySelectorAll(".dot");

// Универсальная функция определения размера точки
function getDotClass(i, active, total) {
    let start = active - 1;

    if (start < 0) start = 0;
    if (start > total - 3) start = total - 3;

    let end = start + 2;

    if (i >= start && i <= end) {
        return i === active ? "active" : "standard";
    }

    let dist = 0;
    if (i < start) dist = start - i;
    else if (i > end) dist = i - end;

    if (dist === 1) return "smaller";
    if (dist >= 2) return "smallest";

    return "standard";
}

// обновление точек
function updateDotsCorrect(activeIndex) {
    const total = dots2.length;
    dots2.forEach((dot, i) => {
        dot.className = "dot " + getDotClass(i, activeIndex, total);
    });
}

// ВКЛЮЧАЕМ ПРИ АНИМАЦИИ ТВОИХ КАРТОЧЕК
function updateActiveFromCards() {
    const sliderRect = slider.getBoundingClientRect();
    const sliderCenter = sliderRect.left + sliderRect.width / 2;

    let bestIndex = 0;
    let bestDistance = Infinity;

    cards.forEach((card, index) => {
        const rect = card.getBoundingClientRect();
        const cardCenter = rect.left + rect.width / 2;

        const distance = Math.abs(sliderCenter - cardCenter);
        if (distance < bestDistance) {
            bestDistance = distance;
            bestIndex = index;
        }
    });

    updateDotsCorrect(bestIndex);
}




slider.addEventListener("scroll", updateActiveFromCards);
window.addEventListener("load", updateActiveFromCards);
</script>

<canvas id="gradCanvas" width="1" height="1" style="display:none;"></canvas>

<script>
const gradientColors = [
    '#A7C7E7',
    '#D9A7C7',
    '#A7C7E7'
];

let t = 0;
let speed = 0.003;

function lerp(a, b, t) {
    return a + (b - a) * t;
}

function hexToRgb(hex) {
    const bigint = parseInt(hex.slice(1), 16);
    return {
        r: (bigint >> 16) & 255,
        g: (bigint >> 8) & 255,
        b: bigint & 255
    };
}

function interpolateColor() {
    let i1 = Math.floor(t) % gradientColors.length;
    let i2 = (i1 + 1) % gradientColors.length;
    let local = t % 1;

    let c1 = hexToRgb(gradientColors[i1]);
    let c2 = hexToRgb(gradientColors[i2]);

    let r = Math.floor(lerp(c1.r, c2.r, local));
    let g = Math.floor(lerp(c1.g, c2.g, local));
    let b = Math.floor(lerp(c1.b, c2.b, local));

    return `rgb(${r}, ${g}, ${b})`;
}

function updateGlobalGradient() {
    const color = interpolateColor();

    // Меняем цвет theme-color наверху
    const meta = document.querySelector("meta[name=theme-color]");
    if (meta) meta.setAttribute("content", color);

    // Меняем фон приложения
    document.body.style.background = color;
    document.querySelector(".screen").style.background = color;

    t += speed;
    requestAnimationFrame(updateGlobalGradient);
}

updateGlobalGradient();
</script>



</body>
</html>
